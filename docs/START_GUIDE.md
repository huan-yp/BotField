# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ç³»ç»Ÿæ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦» + WebSocket å®æ—¶é€šä¿¡æ¶æ„:

- **åç«¯æœåŠ¡å™¨** (Node.js + Express + WebSocket) - ç«¯å£ 3126
- **å‰ç«¯ç•Œé¢** (Vue 3 + Vite) - ç«¯å£ 5173
- **C++ Bridge** (Node.js æ¡¥æ¥å®¢æˆ·ç«¯) - è¿æ¥åç«¯
- **C++ æ¸¸æˆå¼•æ“** (battlefield.exe) - ç”± Bridge å¯åŠ¨

## å¯åŠ¨æ­¥éª¤

### 1. å®‰è£…ä¾èµ– (é¦–æ¬¡è¿è¡Œ)
```powershell
npm install
```

### 2. å¯åŠ¨ç³»ç»Ÿ

#### æ–¹å¼ A: è‡ªåŠ¨å¯åŠ¨è„šæœ¬ (æ¨è)
```powershell
./start.ps1
```
è¿™ä¼šè‡ªåŠ¨æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£:
- åç«¯æœåŠ¡å™¨ (localhost:3126)
- å‰ç«¯å¼€å‘æœåŠ¡å™¨ (localhost:5173)

ç„¶ååœ¨ç¬¬ä¸‰ä¸ªç»ˆç«¯è¿è¡Œ:
```powershell
npm run dev:bridge
```

#### æ–¹å¼ B: æ‰‹åŠ¨é€ä¸ªå¯åŠ¨
```powershell
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯
npm run dev:backend

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯
npm run dev:fe

# ç»ˆç«¯ 3: å¯åŠ¨ C++ Bridge (ç¡®ä¿ C++ å·²ç¼–è¯‘)
npm run dev:bridge
```

### 3. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:5173**

## å¯ç”¨å‘½ä»¤

```powershell
# å‰ç«¯å¼€å‘
npm run dev:fe          # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run build:fe        # æ„å»ºå‰ç«¯ç”Ÿäº§ç‰ˆæœ¬

# åç«¯æœåŠ¡
npm run dev:backend     # å¯åŠ¨åç«¯ WebSocket æœåŠ¡å™¨

# C++ Bridge
npm run dev:bridge      # å¯åŠ¨ C++ æ¡¥æ¥å®¢æˆ·ç«¯
```

## API ç«¯ç‚¹

- **å¥åº·æ£€æŸ¥**: http://localhost:3126/api/health
- **è¿æ¥çŠ¶æ€**: http://localhost:3126/api/status

## é…ç½®æ–‡ä»¶

- `vite.config.js` - Vite å¼€å‘æœåŠ¡å™¨é…ç½® (åŒ…å« API ä»£ç†)
- `backend/server.js` - åç«¯æœåŠ¡å™¨é…ç½®
- `client/src/bridge-client.js` - C++ æ¡¥æ¥å®¢æˆ·ç«¯é…ç½®
- `config.yaml` - æ¸¸æˆé…ç½® (Bot åˆ—è¡¨ã€å±€æ•°ç­‰)

## ç›®å½•ç»“æ„

```
botfield/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ server.js              # WebSocket åç«¯æœåŠ¡å™¨
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ bridge-client.js   # C++ Bridge å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ battlefield.cpp    # C++ æ¸¸æˆå¼•æ“
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ build/
â”‚       â””â”€â”€ main.exe           # ç¼–è¯‘åçš„ C++ å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.vue            # Vue ä¸»åº”ç”¨
â”‚       â””â”€â”€ main.js
â”œâ”€â”€ bots/                      # Bot ç¨‹åºç›®å½•
â”œâ”€â”€ config.yaml                # æ¸¸æˆé…ç½®
â”œâ”€â”€ package.json               # Node.js ä¾èµ–
â”œâ”€â”€ vite.config.js             # Vite é…ç½®
â”œâ”€â”€ start.ps1                  # å¯åŠ¨è„šæœ¬
â””â”€â”€ ARCHITECTURE.md            # æ¶æ„æ–‡æ¡£
```

## å·¥ä½œæµç¨‹

1. **åç«¯æœåŠ¡å™¨** å¯åŠ¨,ç›‘å¬ 3126 ç«¯å£
2. **å‰ç«¯** è¿æ¥åˆ°åç«¯ WebSocket
3. **C++ Bridge** è¿æ¥åˆ°åç«¯,å¹¶å¯åŠ¨ C++ æ¸¸æˆè¿›ç¨‹
4. **C++ è¿›ç¨‹** è¾“å‡ºæ¸¸æˆæ•°æ® (JSON æ ¼å¼)
5. **Bridge** è§£æå¹¶è½¬å‘åˆ°åç«¯
6. **åç«¯** å¹¿æ’­ç»™æ‰€æœ‰å‰ç«¯å®¢æˆ·ç«¯
7. **å‰ç«¯** å®æ—¶æ›´æ–° UI æ˜¾ç¤ºæ’è¡Œæ¦œ

## æ•…éšœæ’æŸ¥

### å‰ç«¯æ˜¾ç¤º"DISCONNECTED"
- æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ: è®¿é—® http://localhost:3126/api/health
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ WebSocket é”™è¯¯

### C++ Bridge è¿æ¥å¤±è´¥
- ç¡®ä¿åç«¯æœåŠ¡å™¨å·²å¯åŠ¨
- æ£€æŸ¥ `client/src/bridge-client.js` ä¸­çš„ `BACKEND_WS_URL`

### æ²¡æœ‰æ¸¸æˆæ•°æ®
- ç¡®è®¤ C++ å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ­£ç¡®
- æ£€æŸ¥ `client/build/main.exe` æ˜¯å¦å­˜åœ¨
- æŸ¥çœ‹ Bridge ç»ˆç«¯è¾“å‡ºæ˜¯å¦æœ‰é”™è¯¯

## å¼€å‘æç¤º

- ä¿®æ”¹å‰ç«¯ä»£ç ä¼šè‡ªåŠ¨çƒ­é‡è½½
- ä¿®æ”¹åç«¯ä»£ç éœ€è¦é‡å¯ `npm run dev:backend`
- ä¿®æ”¹ C++ ä»£ç éœ€è¦é‡æ–°ç¼–è¯‘å¹¶é‡å¯ Bridge

---

ğŸ“– è¯¦ç»†æ¶æ„è¯´æ˜è¯·å‚è€ƒ: `ARCHITECTURE.md`
